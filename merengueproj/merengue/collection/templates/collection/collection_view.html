{% extends "content_view.html" %}
{% load pagination_tags collection_tags %}

{% block contentbody %}
{% with content.get_items|collectionsort:content as items %}
  {% if items %}
    {% autopaginate items 2 %}
    {% paginate %}
    {% if content.group_by %}
      {% collectionregroup items in content as grouped %}
      {% for group in grouped %}
      <h2>{{ group.grouper }}</h2>
      <ul class="contentList collection-{{ collection.slug }} collectionGrouped collection-{{ collection.slug }}-groupedby-{{ content.groupby }}">
        {% for item in group.list %}
          {% collection_item content item %}
        {% endfor %}
      </ul>
      {% endfor %}
    {% else %}
      <ul class="contentList collection-{{ collection.slug }}">
        {% for item in items %}
          {% collection_item content item %}
        {% endfor %}
      </ul>
    {% endif %}
    {% paginate %}
  {% endif %}
{% endwith %}
{% endblock contentbody %}
