{% extends "block.html" %}

{% block blockbody %}
  <ul>
  {% for n in events_list %}
    <li><a href="{{ n.get_absolute_url }}" title="{{ n }}">{{ n }}</a></li>
  {% endfor %}
  </ul>
  <span id="eventsCalendar" class="calendar" style="font-size:73%;"></span>

<link href="{{ MEDIA_URL }}merengue/css/jquery-ui-1.8.css" rel="stylesheet" type="text/css"/>
<script src="{{ MEDIA_URL }}merengue/js/jquery-ui-1.8.min.js"></script>
<script language="javascript" src="{{ MEDIA_URL }}merengue/js/jquery.ui.datepicker-{{ LANGUAGE_CODE }}.js"></script>

<script language="javascript" >
;(function($) {
    $(document).ready(function() {
        var datepickerOptions, eventDate;
        eventDate = {};
        {% for event in events_list %}
            {% if event.start %}
        eventDate[new Date({{ event.start.year }}, {{ event.start.month }}, {{ event.start.day }})] = [true, "calendarEventDay", "{{ event.event.title }}"];
            {% endif %}
        {% endfor %}
        datepickerOptions = {
            changeMonth: true,
            changeYear: true,
            beforeShowDay: function(date) {
                return eventDate[date] || [false, "", ""];
            }
        };
        $("#eventsCalendar").datepicker(datepickerOptions);
    });
})(jQuery);


</script>



{% endblock %}
