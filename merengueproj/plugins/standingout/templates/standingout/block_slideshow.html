{% extends "block.html" %}

{% load i18n inlinetrans section_tags media_tags thumbnail stringfilters content_filters  %}

{% block blocktitle %}{% endblock %}

{% block blockbody %}

{% addmedia "css" %}
  <link href="{{ MEDIA_URL }}merengue/css/shadowbox.css" rel="stylesheet" type="text/css" />
  <link href="{{ MEDIA_URL }}standingout/css/slideshow.css" rel="stylesheet" type="text/css"/>
{% endaddmedia %}

{% addmedia "js" %}
  <script language="javascript" src="{{ MEDIA_URL }}standingout/js/jquery.tools.tabs.min.js"></script>
  <script language="javascript" src="{{ MEDIA_URL }}standingout/js/jquery.standingout-slideshow.js"></script>
  <script type="text/javascript" src="{{ MEDIA_URL }}merengue/js/shadowbox/shadowbox-mootools.js"></script>
  <script type="text/javascript" src="{{ MEDIA_URL }}merengue/js/shadowbox/shadowbox.js"></script>
  <script type="text/javascript" src="{{ MEDIA_URL }}merengue/js/shadowbox/shadowbox-{{ LANGUAGE_CODE }}.js"></script>
{% endaddmedia %}

<div class="standingout-slideshow">
  <div class="standing-out-media-url" style="display: none;">{{ MEDIA_URL }}</div>

  <!-- "previous slide" button -->
  <a class="backward" href="#"></a>

  <div class="standingout-slidecontainer">
    {% if standingouts %}
        {% for standingout in standingouts %}
            <div class="standingout-slide">
                {% ifequal standingout.obj.class_name "video" %}
                <div class ="standingout-image standingout-video">
                   {% multimedia_slide_link standingout.obj standingout "350x240" %}
                </div>
                {% else %}
                {% if standingout.image %}
                  <div class="standingout-image">
                    {% thumbnail standingout.image "350x240" crop="center" as thumb %}
                      <img src="{{ thumb.url }}" />
                    {% endthumbnail %}
                  </div>
                {% else %}
                  {% if standingout.obj.main_image %}
                  <div class="standingout-image">
                    {% thumbnail standingout.obj.main_image "350x240" crop="center" as thumb %}
                      <img src="{{ thumb.url }}" />
                    {% endthumbnail %}
                  </div>
                  {% endif %}
                {% endif %}
                {% endifequal %}
                <div class="standingout-title">
                {% if standingout.obj.get_absolute_url %}
                    <a href="{{ standingout.obj.get_absolute_url }}">{{ standingout.title|default:standingout.obj }}</a>
                {% else %}
                    {{ standingout.title|default:standingout.obj }}
                {% endif %}
                </div>
                <div class="standingout-description">
                {% if standingout.short_description %}
                    {{ standingout.short_description|striptags|truncatechars:250 }}
                {% else %}
                    {% if standingout.obj.description %}
                        {{ standingout.obj.description|striptags|unescape_html_entities|truncatechars:250 }}
                    {% endif %}
                {% endif %}
                </div>
            </div>
        {% endfor %}
    {% endif %}
  </div>

  <!-- "next slide" button -->
  <a class="forward" href="#"></a>
  <div class="visualClear"></div>
  <div class="slidetabs">
  {% for standingout in standingouts %}
     <a href="#">&nbsp;</a>
  {% endfor %}
  </div>
</div>
{% endblock %}
